<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>画板</title>
  <link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
  <canvas id="canvas"></canvas>
  <div id="actions" class="actions">
    <button id="eraser">橡皮擦</button>
    <button id="brush">画笔</button>
  </div>


  <script type="text/javascript">
    var yyy = document.getElementById('canvas');
    var context = yyy.getContext('2d');

    autoSetCanvasSize(yyy)

    listenToMouse(yyy)


    var eraserEnabled = false
    eraser.onclick = function() {
      eraserEnabled =true
      actions.className = 'actions x'

  }
  brush.onclick = function(){
    eraserEnabled = false
    actions.className = 'actions'
  }


/******/

  function autoSetCanvasSize(canvas) {
   setCanvasSize()
   //根据用户的宽高进行改变
   window.onresize = function() {
      setCanvasSize()
  }  

  function setCanvasSize() {
    var pageWidth = document.documentElement.clientWidth    //获取屏幕宽度
    var pageHeight = document.documentElement.clientHeight   //获取屏幕高度

    canvas.width = pageWidth
    canvas.height = pageHeight
  }
  }
  //画一个圆
  /*function drawCircle(x, y, radius) {
    context.beginPath() //开始
    context.fillStyle = 'black' //填充颜色
    context.arc(x, y, radius, 0, Math.PI * 2); //以x，y为中心，radius半径，角度，圆的周长
    context.fill()
  }*/
  //在两点直接画直线，黑色
  function drawLine(x1, y1, x2, y2) {
    context.beginPath();  //开始
    context.strokeStyle = 'black'  //直线的颜色
    context.moveTo(x1, y1) // 起点
    context.lineWidth = 5
    context.lineTo(x2, y2) // 终点
    context.stroke()
    context.closePath() //结束
  }

  function listenToMouse(canvas) {

    var using = false
    var lastPoint = {
      x: undefined,
      y: undefined
  }
  //监听鼠标点击
  canvas.onmousedown = function(aaa) {
    var x = aaa.clientX   //获取坐标
    var y = aaa.clientY   //获取坐标
    using = true  
    if (eraserEnabled) {
      context.clearRect(x - 5, y - 5, 10, 10)
    } else {
      lastPoint = {
        "x": x,
        "y": y
      }
    }
  }
  //监听鼠标移动
  canvas.onmousemove = function(aaa) {
    var x = aaa.clientX  //获取坐标
    var y = aaa.clientY  //获取坐标

    if (!using) {return}  //为false，直接返回

    if (eraserEnabled) {
      context.clearRect(x - 5, y - 5, 10, 10)
    } else {
      var newPoint = {
        "x": x,
        "y": y
      }
      drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y)
      lastPoint = newPoint   //实时更新坐标值
    }

  }
  //监听鼠标松开
  canvas.onmouseup = function(aaa) {
    using = false
  }
}
  </script>

</body>
</html>